<% if !user_signed_in? %>
    <%= render 'layouts/navbar1'%>
<%end%>

<div class="container main-wall">
  <!--navbar-->
  <div class="row">
    <!-- left bar  -->
    <%= render 'layouts/leftbar'%>

    <!--question area  -->
    <div class="col-md-5 question-area">
    <% @questions.each do |question| %>
        <%= render 'layouts/question', :question => question %>
    <% end %>
    </div>

    <!-- suggestions -->
    <%= render 'layouts/suggestions'%>
  </div>
</div>

<script type="text/javascript">
  $("[id^=follow]").click(function() {
    question_id = this.id.substring(6, this.id.length)

    // Sending ajax request to follow the question
    $.ajax({
      url: "/follow",
      type: "POST",
      data: { question_id: question_id },
      dataType: "json",
      complete: function() {},
      success: function(data, textStatus, xhr) {
        alert("Followed!")
      },
      error: function() {
        alert("Error! Please try again later")
      }
    });

    // Changing UI to indicate followed
    $(this).addClass("following")
  })
</script>