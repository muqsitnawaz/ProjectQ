<div style="margin-bottom: 2em; padding: 5px;">
  <div class="row">
    <div class="col-xs-2">
      <% if answer.user.profile_pic.length != 0 && answer.anonymous == false %>
        <%= image_tag answer.user.profile_pic.thumb, class: 'img img-responsive img-smround', width: 45 %>
      <% else %>
        <%= image_tag 'thumb.jpg', class: 'img img-responsive img-smround', width: 45 %>
      <% end %>
    </div>
    <div class="col-xs-7" style="margin-left: -50px;">
      <% if answer.anonymous == false %>
        <%= link_to answer.user.name, public_profile_path(:id => answer.user.id) %>
      <% else %>
        <p>Anonymous</p>
      <% end %>
    </div>
    <div class="col-xs-3" style="margin-left: 50px;">
      <% if answer.user == current_user %>
        <a id="edit_answerQ<%= answer.id %>" class="btn btn-default">edit</a>
        <%= link_to 'delete', answer_path(:id => answer.id), class: 'btn btn-default', method: :delete, data: { confirm: 'Are you sure?'} %>
      <% end %>
    </div>
  </div>
  
  <div class="row">
    <!-- Showing answer and username -->
    <div class="col-xs-12" style="font-size: 16px;">
      <div id="answer<%= answer.id %>">
        <%= answer.content.html_safe %>
      </div>
      <p class="text-muted"><small>Updated at <%= answer.updated_at.strftime('%-d %B, %Y') %></small></p>
    </div>
  </div>

  <!-- Upvote, downvote and reply buttons -->
  <% if user_signed_in? %>
    <div class="row">
      <div class="col-xs-12">
        <button id="upvote<%= answer.id %>" class="btn btn-default">Upvote | <%= answer.upvotes %></button>
        <button id="downvote<%= answer.id %>" class="btn btn-default">Downvote</button>
        <button id="replyA<%= answer.id %>" class="btn btn-default">Reply</button>
        <button id="showReplies<%= answer.id %>" class="btn btn-default">Replies | <%= answer.replies.count %></button>
      </div>
    </div>
  <% end %>
  
  <div id="replyContent<%= answer.id %>" class="row hidden">
    <div class="col-xs-12">
      <% @reply = Reply.new %>
      <%= form_for @reply, :url => {:controller =>"replies", :action => "create"}  do |f| %>
        <%= f.cktext_area :content, class: 'form-control' %><br>
        <%= f.hidden_field :answer_id, value: answer.id %>
    </div>
    <div class="col-xs-4 col-xs-offset-8">
      <div>
        <strong>Anonymous</strong> <%= f.check_box :anonymous %>
        <%= f.submit "Post", class:'btn btn-squared btn-ask1'%>
      </div>
      <% end %>
    </div>
  </div>

  <!-- Hidden replies -->
  <div class="row" style="">
    <div class="col-xs-11 col-xs-offset-1">
      <div id="replies<%= answer.id %>" class="hidden" style="margin-top: 1em; margin-bottom: -1em;">
        <% answer.replies.each do |reply| %>
          <%= render 'questions/reply', :reply => reply %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<script>
$("[id^=replyA]").click(function() {
  answer_id = this.id.substring(6, this.id.length)
  console.log('id: '+answer_id)
  
  $("#replyContent"+answer_id).toggleClass("hidden")
})
</script>